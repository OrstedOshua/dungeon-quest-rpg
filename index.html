<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚öîÔ∏è Dungeon Quest RPG</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="container">
        <div class="login-box">
            <h1>‚öîÔ∏è Dungeon Quest ‚öîÔ∏è</h1>
            
            <div id="messageBox"></div>
            
            <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
            <div id="loginForm">
                <div class="input-group">
                    <label>üë§ –õ–æ–≥–∏–Ω</label>
                    <input type="text" id="loginUsername" placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω" maxlength="20">
                </div>
                <div class="input-group">
                    <label>üîí –ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="loginPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                </div>
                <button class="btn" onclick="login()">üöÄ –í–æ–π—Ç–∏</button>
                <div class="toggle-link" onclick="toggleForms()">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</div>
            </div>
            
            <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
            <div id="registerForm" class="hidden">
                <div class="input-group">
                    <label>üë§ –õ–æ–≥–∏–Ω</label>
                    <input type="text" id="registerUsername" placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –ª–æ–≥–∏–Ω (3-20 —Å–∏–º–≤–æ–ª–æ–≤)" maxlength="20">
                </div>
                <div class="input-group">
                    <label>üîí –ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="registerPassword" placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å (–º–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤)">
                </div>
                <div class="input-group">
                    <label>üîí –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
                    <input type="password" id="registerPasswordConfirm" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                </div>
                <button class="btn btn-success" onclick="register()">‚ú® –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
                <div class="toggle-link" onclick="toggleForms()">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í–æ–π—Ç–∏</div>
            </div>
        </div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ -->
    <button id="logoutButton" class="logout-btn hidden" onclick="logout()">üö™ –í—ã–π—Ç–∏</button>

    <!-- Game Screen -->
    <div id="gameScreen" class="container hidden">
        <!-- Left Panel: Character Stats -->
        <div>
            <div class="card">
                <h2>üë§ –ü–µ—Ä—Å–æ–Ω–∞–∂</h2>
                <div class="stat-row">
                    <span class="stat-label">–ò–º—è:</span>
                    <span class="stat-value" id="playerName">-</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">–£—Ä–æ–≤–µ–Ω—å:</span>
                    <span class="stat-value" id="playerLevel">-</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">–ó–æ–ª–æ—Ç–æ:</span>
                    <span class="stat-value">üí∞ <span id="playerGold">-</span></span>
                </div>
                
                <div style="margin-top: 15px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>‚ù§Ô∏è HP:</span>
                        <span id="playerHpText">-</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill hp-bar" id="hpBar" style="width: 100%;">-</div>
                    </div>
                </div>
                
                <div style="margin-top: 15px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>‚≠ê –û–ø—ã—Ç:</span>
                        <span id="playerExpText">-</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill exp-bar" id="expBar" style="width: 0%;">-</div>
                    </div>
                </div>
                
                <div class="stat-row" style="margin-top: 15px;">
                    <span class="stat-label">‚öîÔ∏è –°–∏–ª–∞:</span>
                    <span class="stat-value" id="playerStrength">-</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">üõ°Ô∏è –ó–∞—â–∏—Ç–∞:</span>
                    <span class="stat-value" id="playerDefense">-</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">‚ö° –õ–æ–≤–∫–æ—Å—Ç—å:</span>
                    <span class="stat-value" id="playerAgility">-</span>
                </div>
            </div>
            
            <div class="card">
                <h2>üé≤ –≠–∫–∏–ø–∏—Ä–æ–≤–∫–∞</h2>
                <div class="equipment-slot">
                    <strong>‚öîÔ∏è –û—Ä—É–∂–∏–µ:</strong>
                    <div id="equippedWeapon">-</div>
                </div>
                <div class="equipment-slot">
                    <strong>üõ°Ô∏è –ë—Ä–æ–Ω—è:</strong>
                    <div id="equippedArmor">-</div>
                </div>
                <div class="equipment-slot">
                    <strong>üíç –ê–∫—Å–µ—Å—Å—É–∞—Ä—ã:</strong>
                    <div id="equippedAccessory">-</div>
                </div>
            </div>
        </div>

        <!-- Right Panel: Tabbed Content -->
        <div>
            <!-- Main Tab Navigation -->
            <div class="tabs-container">
                <button class="tab-button active" data-tab="combat" onclick="switchTab(event, 'combat')">
                    ‚öîÔ∏è –ë–æ–π
                </button>
                <button class="tab-button" data-tab="inventory" onclick="switchTab(event, 'inventory')">
                    üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å
                </button>
                <button class="tab-button" data-tab="shop" onclick="switchTab(event, 'shop')">
                    üè™ –ú–∞–≥–∞–∑–∏–Ω
                </button>
                <button class="tab-button" data-tab="quests" onclick="switchTab(event, 'quests')">
                    üìú –ö–≤–µ—Å—Ç—ã
                </button>
            </div>

            <!-- Combat Tab (with sub-tabs) -->
            <div id="combatTab" class="tab-content active">
                <!-- Battle Sub-Tabs -->
                <div class="battle-tabs">
                    <button class="battle-tab-button active" data-battle-tab="adventures" onclick="loadBattleTab('adventures')">
                        üó°Ô∏è –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è
                    </button>
                    <button class="battle-tab-button" data-battle-tab="dungeons" onclick="loadBattleTab('dungeons')">
                        üè∞ –ü–æ–¥–∑–µ–º–µ–ª—å—è
                    </button>
                    <button class="battle-tab-button" data-battle-tab="bosses" onclick="loadBattleTab('bosses')">
                        üëë –ë–æ—Å—Å—ã
                    </button>
                    <button class="battle-tab-button" data-battle-tab="worldBosses" onclick="loadBattleTab('worldBosses')">
                        üåç –ú–∏—Ä–æ–≤—ã–µ –±–æ—Å—Å—ã
                    </button>
                </div>

                <!-- Adventures Content -->
                <div id="adventuresContent">
                    <div class="card combat-card">
                        <h2>‚öîÔ∏è –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è</h2>
                        
                        <div class="combat-buttons" id="combatMainButtons">
                            <button id="searchButton" class="btn btn-success" onclick="startCombat()">üó°Ô∏è –ò—Å–∫–∞—Ç—å –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞</button>
                            <button class="btn btn-secondary" onclick="healPlayer()">‚ù§Ô∏è –õ–µ—á–∏—Ç—å—Å—è (100 üí∞)</button>
                        </div>
                        
                        <div id="combatArea" class="hidden" style="margin-top: 20px;">
                            <div class="combat-content">
                                <div class="monster-display">
                                    <h3 id="monsterName">-</h3>
                                    <div style="color: var(--text-secondary); margin-bottom: 10px;">
                                        –£—Ä–æ–≤–µ–Ω—å <span id="monsterLevel">-</span> | 
                                        ‚öîÔ∏è <span id="monsterStrength">-</span> | 
                                        üõ°Ô∏è <span id="monsterDefense">-</span>
                                    </div>
                                    <div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                            <span>HP:</span>
                                            <span id="monsterHpText">-</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill" id="monsterHpBar" style="width: 100%; background: linear-gradient(90deg, #f56565, #c73851);">-</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="combat-log" id="combatLog"></div>
                                
                                <div id="rewardDisplay" class="reward-display hidden"></div>
                            </div>
                            
                            <div class="combat-action-buttons">
                                <div class="combat-buttons">
                                    <button id="attackButton" class="btn" onclick="attack()">‚öîÔ∏è –ê—Ç–∞–∫–æ–≤–∞—Ç—å</button>
                                    <button class="btn btn-secondary" onclick="fleeCombat()">üèÉ –°–±–µ–∂–∞—Ç—å</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Dungeons Content -->
                <div id="dungeonsContent" class="hidden">
                    <div class="card">
                        <h2>üè∞ –ü–æ–¥–∑–µ–º–µ–ª—å—è</h2>
                        <p style="color: var(--text-secondary); margin-bottom: 15px;">–ò—Å—Å–ª–µ–¥—É–π—Ç–µ –æ–ø–∞—Å–Ω—ã–µ –ø–æ–¥–∑–µ–º–µ–ª—å—è –∏ —Å—Ä–∞–∂–∞–π—Ç–µ—Å—å —Å –±–æ—Å—Å–∞–º–∏</p>
                        <div id="dungeonsList"></div>
                    </div>

                    <div id="dungeonCombatCard" class="card combat-card hidden">
                        <h2 id="dungeonTitle">üè∞ –ü–æ–¥–∑–µ–º–µ–ª—å–µ</h2>
                        
                        <div id="dungeonCombatArea">
                            <div class="combat-content">
                                <div id="floorInfo" style="background: var(--bg-card); padding: 10px; border-radius: 6px; margin-bottom: 15px; border-left: 3px solid var(--warning);"></div>
                                
                                <div class="monster-display" id="dungeonMonsterDisplay">
                                    <h3 id="dungeonMonsterName">-</h3>
                                    <div style="color: var(--text-secondary); margin-bottom: 10px;">
                                        –£—Ä–æ–≤–µ–Ω—å <span id="dungeonMonsterLevel">-</span> | 
                                        ‚öîÔ∏è <span id="dungeonMonsterStrength">-</span> | 
                                        üõ°Ô∏è <span id="dungeonMonsterDefense">-</span>
                                    </div>
                                    <div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                            <span>HP:</span>
                                            <span id="dungeonMonsterHpText">-</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill" id="dungeonMonsterHpBar" style="width: 100%; background: linear-gradient(90deg, #f56565, #c73851);">-</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="combat-log" id="dungeonCombatLog"></div>
                                
                                <div id="dungeonRewardDisplay" class="reward-display hidden"></div>
                            </div>
                            
                            <div class="combat-action-buttons">
                                <div class="combat-buttons">
                                    <button id="dungeonAttackButton" class="btn" onclick="dungeonAttack()">‚öîÔ∏è –ê—Ç–∞–∫–æ–≤–∞—Ç—å</button>
                                    <button class="btn btn-secondary" onclick="exitDungeon()">üö™ –í—ã–π—Ç–∏ –∏–∑ –ø–æ–¥–∑–µ–º–µ–ª—å—è</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bosses Content -->
                <div id="bossesContent" class="hidden">
                    <div class="card">
                        <h2>üëë –ë–æ—Å—Å—ã</h2>
                        <p style="color: var(--text-secondary); margin-bottom: 15px;">–°—Ä–∞–∑–∏—Ç–µ—Å—å —Å –º–æ–≥—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –±–æ—Å—Å–∞–º–∏. –ë–∏–ª–µ—Ç—ã –ø–∞–¥–∞—é—Ç —Å –º–æ–Ω—Å—Ç—Ä–æ–≤ (14% —à–∞–Ω—Å)</p>
                        <div id="bossesList"></div>
                    </div>

                    <div id="bossCombatCard" class="card combat-card hidden">
                        <h2 id="bossTitle">üëë –ë–æ—Å—Å</h2>
                        
                        <div id="bossCombatArea">
                            <div class="combat-content">
                                <div class="monster-display" style="background: linear-gradient(135deg, var(--bg-secondary) 0%, #1a1534 100%); border-color: var(--accent-secondary);">
                                    <h3 id="bossMonsterName">-</h3>
                                    <div style="color: var(--text-secondary); margin-bottom: 10px;">
                                        –£—Ä–æ–≤–µ–Ω—å <span id="bossMonsterLevel">-</span> | 
                                        ‚öîÔ∏è <span id="bossMonsterStrength">-</span> | 
                                        üõ°Ô∏è <span id="bossMonsterDefense">-</span>
                                    </div>
                                    <div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                            <span>HP:</span>
                                            <span id="bossMonsterHpText">-</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill" id="bossMonsterHpBar" style="width: 100%; background: linear-gradient(90deg, #f56565, #c73851);">-</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="combat-log" id="bossCombatLog"></div>
                                
                                <div id="bossRewardDisplay" class="reward-display hidden"></div>
                            </div>
                            
                            <div class="combat-action-buttons">
                                <div class="combat-buttons">
                                    <button id="bossAttackButton" class="btn" onclick="bossAttack()">‚öîÔ∏è –ê—Ç–∞–∫–æ–≤–∞—Ç—å</button>
                                    <button class="btn btn-secondary" onclick="exitBoss()">üö™ –ü–æ–∫–∏–Ω—É—Ç—å –±–æ–π</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- World Bosses Content -->
                <div id="worldBossesContent" class="hidden">
                    <div class="card">
                        <h2>üåç –ú–∏—Ä–æ–≤—ã–µ –±–æ—Å—Å—ã</h2>
                        <p style="color: var(--text-secondary); margin-bottom: 15px;">–≠–ø–∏—á–µ—Å–∫–∏–µ –±–æ—Å—Å—ã —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —É—Ä–æ–Ω–∞. –¢—Ä–µ–±—É—é—Ç –±–∏–ª–µ—Ç—ã –∫ –º–∏—Ä–æ–≤—ã–º –±–æ—Å—Å–∞–º (100% –¥—Ä–æ–ø —Å –±–æ—Å—Å–æ–≤)</p>
                        <div id="worldBossesList"></div>
                    </div>

                    <div id="worldBossCombatCard" class="card combat-card hidden">
                        <h2 id="worldBossTitle">üåç –ú–∏—Ä–æ–≤–æ–π –±–æ—Å—Å</h2>
                        
                        <div id="worldBossCombatArea">
                            <div class="combat-content">
                                <div class="monster-display" style="background: linear-gradient(135deg, #1a1534 0%, #2d1b3d 100%); border-color: var(--accent-secondary);">
                                    <h3 id="wbMonsterName">-</h3>
                                    <div style="color: var(--text-secondary); margin-bottom: 10px;">
                                        –£—Ä–æ–≤–µ–Ω—å <span id="wbMonsterLevel">-</span> | 
                                        ‚öîÔ∏è <span id="wbMonsterStrength">-</span> | 
                                        üõ°Ô∏è <span id="wbMonsterDefense">-</span>
                                    </div>
                                    <div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                            <span>HP:</span>
                                            <span id="wbMonsterHpText">-</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill" id="wbMonsterHpBar" style="width: 100%; background: linear-gradient(90deg, #f56565, #c73851);">-</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="combat-log" id="worldBossCombatLog"></div>
                                
                                <div id="worldBossRewardDisplay" class="reward-display hidden"></div>
                            </div>
                            
                            <div class="combat-action-buttons">
                                <div class="combat-buttons">
                                    <button id="worldBossAttackButton" class="btn" onclick="worldBossAttack()">‚öîÔ∏è –ê—Ç–∞–∫–æ–≤–∞—Ç—å</button>
                                    <button class="btn btn-secondary" onclick="exitWorldBoss()">üö™ –ü–æ–∫–∏–Ω—É—Ç—å –±–æ–π</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Inventory Tab -->
            <div id="inventoryTab" class="tab-content">
                <div class="card">
                    <h2>üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
                    <p style="color: var(--text-secondary); margin-bottom: 15px;">–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º–∏ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏</p>
                    <div id="inventoryItems" class="inventory-grid"></div>
                </div>
            </div>

            <!-- Shop Tab -->
            <div id="shopTab" class="tab-content">
                <div class="card">
                    <h2>üè™ –ú–∞–≥–∞–∑–∏–Ω</h2>
                    <p style="color: var(--text-secondary); margin-bottom: 15px;">–ü–æ–∫—É–ø–∞–π—Ç–µ –æ—Ä—É–∂–∏–µ, –±—Ä–æ–Ω—é, –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ª–æ—Ç—ã –∏ —Ä–∞—Å—Ö–æ–¥–Ω–∏–∫–∏</p>
                    <div id="shopItems" class="shop-items"></div>
                </div>
            </div>

            <!-- Quests Tab -->
            <div id="questsTab" class="tab-content">
                <div class="card">
                    <h2>üìú –ö–≤–µ—Å—Ç—ã</h2>
                    <p style="color: var(--text-secondary); margin-bottom: 15px;">–í—ã–ø–æ–ª–Ω—è–π—Ç–µ –∑–∞–¥–∞–Ω–∏—è –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –Ω–∞–≥—Ä–∞–¥—ã. –ù–æ–≤—ã–µ –∫–≤–µ—Å—Ç—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!</p>
                    <div id="questList" class="quest-list"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="auth.js"></script>
    <script src="game.js"></script>
</body>
</html>